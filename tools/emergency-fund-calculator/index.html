<!DOCTYPE html>
<html class="dark" lang="en">
<head>
    <meta charset="utf-8"/>
    <meta content="width=device-width, initial-scale=1.0" name="viewport"/>
    <title>Emergency Fund Calculator & Timeline Planner | Affilore</title>
    <meta name="description" content="Calculate your ideal 3, 6, or 12-month emergency fund target. Track your progress and see exactly how many months it will take to reach financial security.">
    <script src="https://cdn.tailwindcss.com?plugins=forms"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;500;600;700;800&display=swap" rel="stylesheet"/>
    <link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:wght,FILL@100..700,0..1&amp;display=swap" rel="stylesheet"/>
    <link rel="icon" type="image/png" href="/logo.png">
    
    <script>
        tailwind.config = {
            darkMode: "class", 
            theme: {
                extend: {
                    colors: {
                        primary: "#FFBF00", 
                        "background-dark": "#121212", 
                        "card-dark": "#1A1A1A",
                        safe: "#00C851",
                        warning: "#FF8800",
                        danger: "#FF4444"
                    }, 
                    fontFamily: { outfit: ['Outfit', 'sans-serif'] }
                }
            }
        };
    </script>
    <style>
        body { font-family: 'Outfit', sans-serif; background-color: #121212; color: white; }
        .glass-header { background: rgba(18, 18, 18, 0.95); backdrop-filter: blur(20px); border-bottom: 1px solid rgba(255, 255, 255, 0.1); }
        .glass-card { background: rgba(255, 255, 255, 0.03); border: 1px solid rgba(255, 255, 255, 0.05); }
        .expense-input { background: rgba(0,0,0,0.5); border: 1px solid rgba(255,255,255,0.1); color: white; border-radius: 0.5rem; padding: 0.75rem 1rem; width: 100%; text-align: right; }
        .expense-input:focus { border-color: #FFBF00; outline: none; box-shadow: 0 0 0 1px #FFBF00; }
        /* Custom Range Slider */
        input[type=range] { -webkit-appearance: none; width: 100%; background: transparent; }
        input[type=range]::-webkit-slider-runnable-track { width: 100%; height: 6px; background: #333; border-radius: 5px; }
        input[type=range]::-webkit-slider-thumb { height: 20px; width: 20px; border-radius: 50%; background: #FFBF00; cursor: pointer; -webkit-appearance: none; margin-top: -7px; }
    </style>
</head>
<body class="min-h-screen pt-24 pb-20">

<header class="fixed top-0 w-full z-50 glass-header px-6 py-4 text-white">
    <div class="max-w-7xl mx-auto flex items-center justify-between">
        <div class="flex items-center gap-3">
            <a href="/" class="flex items-center gap-2 group">
                <span class="material-symbols-outlined text-slate-400 group-hover:text-primary transition-colors">arrow_back</span>
                <img src="/logo.png" alt="Affilore Logo" class="h-8 w-auto object-contain">
                <span class="text-xl font-bold">Affi<span class="text-primary">lore</span></span>
            </a>
            <div class="h-6 w-px bg-white/10 mx-2"></div>
            <h1 class="text-slate-400 text-sm font-medium">Emergency Fund Planner</h1>
        </div>
        <a href="/" class="hidden sm:block text-sm font-bold text-primary hover:text-white transition-colors">Back to Home</a>
    </div>
</header>

<main class="max-w-7xl mx-auto px-4 md:px-6">
    
    <div class="text-center mb-10">
        <h2 class="text-3xl md:text-5xl font-bold text-white mb-4">Emergency Fund Planner</h2>
        <p class="text-slate-400 max-w-2xl mx-auto text-lg">Calculate your safety net target, see your current progress, and find out exactly how long it will take to reach financial peace of mind.</p>
    </div>

    <div class="grid grid-cols-1 lg:grid-cols-12 gap-8">
        
        <div class="lg:col-span-5 flex flex-col gap-6">
            
            <div class="glass-card rounded-2xl p-6 shadow-xl border-t-4 border-t-primary">
                <div class="flex items-center gap-3 mb-6">
                    <span class="material-symbols-outlined text-primary text-3xl">receipt_long</span>
                    <div>
                        <h3 class="text-xl font-bold text-white">Essential Monthly Expenses</h3>
                        <p class="text-xs text-slate-400">Only include absolute "needs" to survive.</p>
                    </div>
                </div>
                
                <div class="space-y-4">
                    <div class="flex justify-between items-center gap-4">
                        <label class="text-slate-300 font-medium">Housing (Rent/Mortgage)</label>
                        <input type="number" class="expense-input exp-val" value="1500" placeholder="0">
                    </div>
                    <div class="flex justify-between items-center gap-4">
                        <label class="text-slate-300 font-medium">Food & Groceries</label>
                        <input type="number" class="expense-input exp-val" value="400" placeholder="0">
                    </div>
                    <div class="flex justify-between items-center gap-4">
                        <label class="text-slate-300 font-medium">Utilities & Bills</label>
                        <input type="number" class="expense-input exp-val" value="200" placeholder="0">
                    </div>
                    <div class="flex justify-between items-center gap-4">
                        <label class="text-slate-300 font-medium">Transportation</label>
                        <input type="number" class="expense-input exp-val" value="300" placeholder="0">
                    </div>
                    <div class="flex justify-between items-center gap-4">
                        <label class="text-slate-300 font-medium">Insurance & Debt Minimums</label>
                        <input type="number" class="expense-input exp-val" value="250" placeholder="0">
                    </div>
                </div>
                
                <div class="mt-6 pt-4 border-t border-white/10 flex justify-between items-center bg-black/30 p-4 rounded-xl">
                    <span class="font-bold text-slate-300 uppercase text-sm">Monthly Burn Rate</span>
                    <span id="burn-rate" class="text-2xl font-bold text-white">$0</span>
                </div>
            </div>

            <div class="glass-card rounded-2xl p-6 shadow-xl">
                <div class="flex items-center gap-3 mb-6">
                    <span class="material-symbols-outlined text-safe text-3xl">savings</span>
                    <div>
                        <h3 class="text-xl font-bold text-white">Your Action Plan</h3>
                        <p class="text-xs text-slate-400">Where are you right now?</p>
                    </div>
                </div>

                <div class="space-y-6">
                    <div>
                        <label class="block text-sm font-bold text-slate-300 mb-2">How much do you currently have saved?</label>
                        <div class="relative">
                            <span class="absolute left-4 top-1/2 -translate-y-1/2 text-slate-400 font-bold">$</span>
                            <input type="number" id="current-savings" value="2000" class="w-full bg-black/50 border-white/20 rounded-xl pl-10 pr-4 py-3 text-white focus:border-primary focus:ring-primary font-bold text-lg">
                        </div>
                    </div>
                    
                    <div>
                        <label class="block text-sm font-bold text-slate-300 mb-2">How much can you save per month?</label>
                        <div class="relative">
                            <span class="absolute left-4 top-1/2 -translate-y-1/2 text-slate-400 font-bold">$</span>
                            <input type="number" id="monthly-contribution" value="400" class="w-full bg-black/50 border-white/20 rounded-xl pl-10 pr-4 py-3 text-white focus:border-primary focus:ring-primary font-bold text-lg">
                        </div>
                    </div>

                    <div>
                        <div class="flex justify-between mb-2">
                            <label class="text-sm font-bold text-slate-300">Target Coverage</label>
                            <span id="months-target-label" class="text-primary font-bold">6 Months</span>
                        </div>
                        <input type="range" id="months-target" min="3" max="12" value="6" step="1">
                        <div class="flex justify-between text-xs text-slate-500 mt-1">
                            <span>3 mo (Minimum)</span>
                            <span>6 mo (Standard)</span>
                            <span>12 mo (Max Security)</span>
                        </div>
                    </div>
                </div>
            </div>

        </div>

        <div class="lg:col-span-7 flex flex-col gap-6">
            
            <div class="glass-card rounded-2xl p-8 bg-gradient-to-br from-white/5 to-transparent border border-white/10 relative overflow-hidden">
                <div class="absolute -right-20 -top-20 w-64 h-64 bg-primary/10 rounded-full blur-3xl"></div>
                
                <div class="relative z-10 flex flex-col md:flex-row justify-between items-start md:items-end gap-6 mb-8">
                    <div>
                        <p class="text-slate-400 font-bold uppercase tracking-widest text-sm mb-2" id="dynamic-target-label">Your 6-Month Target</p>
                        <h3 id="target-amount" class="text-5xl md:text-6xl font-extrabold text-white">$0</h3>
                    </div>
                    <div class="text-left md:text-right bg-black/40 p-4 rounded-xl border border-white/5 w-full md:w-auto">
                        <p class="text-slate-400 text-xs uppercase font-bold mb-1">Time to reach goal</p>
                        <p id="time-to-goal" class="text-2xl font-bold text-primary">0 Months</p>
                    </div>
                </div>

                <div>
                    <div class="flex justify-between text-sm font-bold mb-2">
                        <span class="text-white">Current Progress</span>
                        <span id="progress-pct" class="text-primary">0%</span>
                    </div>
                    <div class="h-4 w-full bg-black rounded-full overflow-hidden border border-white/10">
                        <div id="progress-bar" class="h-full bg-gradient-to-r from-warning to-safe w-0 transition-all duration-1000"></div>
                    </div>
                    <p id="progress-msg" class="text-xs text-slate-400 mt-3 text-center">You need to save $X more.</p>
                </div>
            </div>

            <div class="grid grid-cols-1 sm:grid-cols-3 gap-4">
                <div class="glass-card p-5 rounded-xl border-t-2 border-t-danger text-center">
                    <p class="text-slate-400 text-xs font-bold uppercase mb-1">3 Months (Baseline)</p>
                    <p id="tier-3" class="text-xl font-bold text-white">$0</p>
                </div>
                <div class="glass-card p-5 rounded-xl border-t-2 border-t-warning text-center">
                    <p class="text-slate-400 text-xs font-bold uppercase mb-1">6 Months (Standard)</p>
                    <p id="tier-6" class="text-xl font-bold text-white">$0</p>
                </div>
                <div class="glass-card p-5 rounded-xl border-t-2 border-t-safe text-center">
                    <p class="text-slate-400 text-xs font-bold uppercase mb-1">12 Months (Ironclad)</p>
                    <p id="tier-12" class="text-xl font-bold text-white">$0</p>
                </div>
            </div>

            <div class="glass-card p-6 rounded-2xl shadow-xl">
                <h4 class="text-sm font-bold text-white mb-4">Projected Growth Timeline</h4>
                <div class="h-64 relative">
                    <canvas id="growthChart"></canvas>
                </div>
            </div>

            <div class="glass-card p-8 rounded-2xl text-slate-400 text-sm leading-relaxed mt-2">
                <h2 class="text-2xl font-bold text-white mb-4">The Foundation of Financial Independence</h2>
                
                <h3 class="text-lg font-bold text-white mt-4 mb-2">How much is enough?</h3>
                <p class="mb-4">While the standard rule of thumb is 3 to 6 months of living expenses, your ideal target depends on your income stability. If you are a freelancer or business owner with fluctuating income, aim closer to 9 or 12 months. If you have a highly secure job (like government work) and low debt, 3 months might be sufficient.</p>
                
                <h3 class="text-lg font-bold text-white mt-4 mb-2">Where should you keep this money?</h3>
                <p class="mb-4">Your emergency fund is <strong>not an investment</strong>; it is insurance. It should never be put into the stock market, crypto, or locked in illiquid assets. Keep it in a high-yield savings account (HYSA) or a cash management account where it earns a safe yield and can be accessed within 24-48 hours without penalty.</p>
            </div>

        </div>
    </div>

</main>

<div id="cookie-banner" class="fixed bottom-0 left-0 w-full bg-[#1A1A1A] border-t border-glass-border shadow-2xl z-50 transform translate-y-full transition-transform duration-300">
    <div class="max-w-7xl mx-auto px-6 py-6 flex flex-col sm:flex-row items-center justify-between gap-6">
        <p class="text-sm text-gray-400">Affilore uses cookies to analyze traffic. We do not save your financial data. By clicking "Accept", you consent.</p>
        <button id="accept-cookies" class="whitespace-nowrap rounded-full bg-primary px-8 py-3 text-sm font-bold text-charcoal transition hover:bg-white">Accept</button>
    </div>
</div>

<script>
    // Inputs
    const expInputs = document.querySelectorAll('.exp-val');
    const currentSavingsInput = document.getElementById('current-savings');
    const monthlyContInput = document.getElementById('monthly-contribution');
    const monthsTargetSlider = document.getElementById('months-target');
    
    // Outputs
    const burnRateEl = document.getElementById('burn-rate');
    const targetAmountEl = document.getElementById('target-amount');
    const dynamicTargetLabel = document.getElementById('dynamic-target-label');
    const timeToGoalEl = document.getElementById('time-to-goal');
    
    const progressPct = document.getElementById('progress-pct');
    const progressBar = document.getElementById('progress-bar');
    const progressMsg = document.getElementById('progress-msg');
    
    const tier3 = document.getElementById('tier-3');
    const tier6 = document.getElementById('tier-6');
    const tier12 = document.getElementById('tier-12');
    const monthsTargetLabel = document.getElementById('months-target-label');

    let growthChart;

    function initChart() {
        const ctx = document.getElementById('growthChart').getContext('2d');
        growthChart = new Chart(ctx, {
            type: 'line',
            data: {
                labels: [],
                datasets: [{
                    label: 'Savings Balance',
                    data: [],
                    borderColor: '#FFBF00',
                    backgroundColor: 'rgba(255, 191, 0, 0.1)',
                    borderWidth: 3,
                    fill: true,
                    tension: 0.4
                },
                {
                    label: 'Target',
                    data: [],
                    borderColor: '#00C851',
                    borderWidth: 2,
                    borderDash: [5, 5],
                    fill: false,
                    pointRadius: 0
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                scales: {
                    y: { beginAtZero: true, grid: { color: 'rgba(255,255,255,0.1)' }, ticks: { color: '#9ca3af' } },
                    x: { grid: { display: false }, ticks: { color: '#9ca3af' } }
                },
                plugins: {
                    legend: { labels: { color: 'white', font: { family: 'Outfit' } } }
                }
            }
        });
    }

    function formatMoney(amount) {
        return new Intl.NumberFormat('en-US', { style: 'currency', currency: 'USD', minimumFractionDigits: 0, maximumFractionDigits: 0 }).format(amount);
    }

    function calculate() {
        // Calculate Burn Rate
        let monthlyBurn = 0;
        expInputs.forEach(input => {
            monthlyBurn += parseFloat(input.value) || 0;
        });
        burnRateEl.innerText = formatMoney(monthlyBurn);

        // Calculate Tiers
        tier3.innerText = formatMoney(monthlyBurn * 3);
        tier6.innerText = formatMoney(monthlyBurn * 6);
        tier12.innerText = formatMoney(monthlyBurn * 12);

        // Calculate Selected Target
        const targetMonths = parseInt(monthsTargetSlider.value);
        monthsTargetLabel.innerText = `${targetMonths} Months`;
        dynamicTargetLabel.innerText = `Your ${targetMonths}-Month Target`;
        
        const targetAmount = monthlyBurn * targetMonths;
        targetAmountEl.innerText = formatMoney(targetAmount);

        // Progress Calculations
        const currentSavings = parseFloat(currentSavingsInput.value) || 0;
        const monthlyCont = parseFloat(monthlyContInput.value) || 0;
        
        let pct = targetAmount > 0 ? (currentSavings / targetAmount) * 100 : 0;
        if(pct > 100) pct = 100;

        progressPct.innerText = `${pct.toFixed(1)}%`;
        progressBar.style.width = `${pct}%`;

        // Color coding progress bar
        if(pct < 33) progressBar.className = "h-full bg-danger w-0 transition-all duration-1000";
        else if (pct < 75) progressBar.className = "h-full bg-warning w-0 transition-all duration-1000";
        else progressBar.className = "h-full bg-safe w-0 transition-all duration-1000";

        const remaining = Math.max(0, targetAmount - currentSavings);
        if(remaining === 0 && targetAmount > 0) {
            progressMsg.innerText = "ðŸŽ‰ Goal reached! Your emergency fund is fully funded.";
            progressMsg.className = "text-xs text-safe mt-3 text-center font-bold";
            timeToGoalEl.innerText = "Goal Met!";
        } else {
            progressMsg.innerText = `You need to save ${formatMoney(remaining)} more.`;
            progressMsg.className = "text-xs text-slate-400 mt-3 text-center";
            
            if(monthlyCont > 0) {
                const monthsLeft = Math.ceil(remaining / monthlyCont);
                timeToGoalEl.innerText = `${monthsLeft} Months`;
                updateChart(currentSavings, monthlyCont, targetAmount, monthsLeft);
            } else {
                timeToGoalEl.innerText = "Never";
                updateChart(currentSavings, 0, targetAmount, 12); // Show flat line
            }
        }
    }

    function updateChart(start, contribution, target, months) {
        // Limit chart projection to max 36 months to prevent memory issues
        const plotMonths = Math.min(months, 36); 
        const labels = [];
        const balances = [];
        const targets = [];

        let current = start;
        for(let i=0; i <= plotMonths; i++) {
            labels.push(`Mo ${i}`);
            balances.push(current);
            targets.push(target);
            current += contribution;
        }

        growthChart.data.labels = labels;
        growthChart.data.datasets[0].data = balances;
        growthChart.data.datasets[1].data = targets;
        growthChart.update();
    }

    // Event Listeners
    expInputs.forEach(input => input.addEventListener('input', calculate));
    currentSavingsInput.addEventListener('input', calculate);
    monthlyContInput.addEventListener('input', calculate);
    monthsTargetSlider.addEventListener('input', calculate);

    // Init
    initChart();
    calculate();

    // Cookie Logic
    if (!localStorage.getItem('affiloreCookieConsent')) {
        setTimeout(() => document.getElementById('cookie-banner').classList.remove('translate-y-full'), 1000);
    }
    document.getElementById('accept-cookies').addEventListener('click', () => {
        localStorage.setItem('affiloreCookieConsent', 'true');
        document.getElementById('cookie-banner').classList.add('translate-y-full');
    });
</script>
</body>
</html>
